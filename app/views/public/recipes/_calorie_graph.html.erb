<canvas id="CaloryChart"></canvas>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.js"></script>

<% if recipe.total_calory == 0 %>
  <script>
    var ctx = document.getElementById("CaloryChart");
    var myPieChart = new Chart(ctx, {
      type: "pie",
      data: {
        labels: ["炭水化物0", "タンパク質0", "脂質0"],
        datasets: [{
          backgroundColor: [
              "blue",
              "red",
              "yellow"
          ],
          data: [
            0,
            0,
            0,
          ],
        }]
      },
      options: {
        title: {
          display: true,
          text: "栄養素割合(%)"
        }
      }
    });
  </script>
<% else %>
  <script>
    var ctx = document.getElementById("CaloryChart");
    var myPieChart = new Chart(ctx, {
      type: "pie",
      data: {
        labels: ["炭水化物<%= recipe.carbo_rate %>%", "タンパク質<%= recipe.protein_rate %>%", "脂質<%= recipe.fat_rate %>%"],
        datasets: [{
          backgroundColor: [
              "blue",
              "red",
              "yellow"
          ],
          data: [
            <%= recipe.carbo_rate %>,
            <%= recipe.protein_rate %>,
            <%= recipe.fat_rate %>,
          ],
        }]
      },
      options: {
        title: {
          display: true,
          text: "栄養素割合(%)"
        }
      }
    });
  </script>
<% end %>
